/*! UIkit 2.27.5 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
!function(t){var e;window.UIkit2&&(e=t(UIkit2)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return e||t(UIkit2)})}(function(l){"use strict";var d,h,a,u,p,c,f,g,m,v="ontouchstart"in window||"MSGesture"in window||window.DocumentTouch&&document instanceof DocumentTouch,b=v?"MSGesture"in window||window.PointerEvent?"pointerdown":"touchstart":"mousedown",C=v?"MSGesture"in window||window.PointerEvent?"pointermove":"touchmove":"mousemove",$=v?"MSGesture"in window||window.PointerEvent?"pointerup":"touchend":"mouseup";return l.component("sortable",{defaults:{animation:150,threshold:10,childClass:"uk-sortable-item",placeholderClass:"uk-sortable-placeholder",overClass:"uk-sortable-over",draggingClass:"uk-sortable-dragged",dragMovingClass:"uk-sortable-moving",baseClass:"uk-sortable",noDragClass:"uk-sortable-nodrag",emptyClass:"uk-sortable-empty",dragCustomClass:"",handleClass:!1,group:!1,stop:function(){},start:function(){},change:function(){}},boot:function(){l.ready(function(t){l.$("[data-uk-sortable]",t).each(function(){var t=l.$(this);t.data("sortable")||l.sortable(t,l.Utils.options(t.attr("data-uk-sortable")))})}),l.$html.on(C,function(t){if(p){var e=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0]:t;(Math.abs(e.pageX-p.pos.x)>p.threshold||Math.abs(e.pageY-p.pos.y)>p.threshold)&&p.apply(e)}if(d){u||(u=!0,d.show(),d.$current.addClass(d.$sortable.options.placeholderClass),d.$sortable.element.children().addClass(d.$sortable.options.childClass),l.$html.addClass(d.$sortable.options.dragMovingClass));var o=d.data("mouse-offset"),n=t.originalEvent.touches&&t.originalEvent.touches[0]||t.originalEvent,s=parseInt(n.pageX,10)+o.left,a=parseInt(n.pageY,10)+o.top;if(d.css({left:s,top:a}),a+d.height()/3>document.body.offsetHeight)return;a<l.$win.scrollTop()?l.$win.scrollTop(l.$win.scrollTop()-Math.ceil(d.height()/3)):a+d.height()/3>window.innerHeight+l.$win.scrollTop()&&l.$win.scrollTop(l.$win.scrollTop()+Math.ceil(d.height()/3))}}),l.$html.on($,function(t){if(p=!1,h&&d){var e=function(t){t=l.$(t);do{if(t.data("sortable"))return t;t=l.$(t).parent()}while(t.length);return t}(h),o=d.$sortable,n={type:t.type};e[0]&&o.dragDrop(n,o.element),o.dragEnd(n,o.element)}else h=d=null})},init:function(){var r=this,i=this.element[0];c=[],this.checkEmptyList(),this.element.data("sortable-group",this.options.group?this.options.group:l.Utils.uid("sortable-group"));var t=s(function(t){if(!(t.data&&t.data.sortable||2==t.which||4==t.button)){var e=l.$(t.target),o=e.is("a[href]")?e:e.parents("a[href]");if(!e.is(":input")){if(r.options.handleClass)if(!(e.hasClass(r.options.handleClass)?e:e.closest("."+r.options.handleClass,r.element)).length)return;return t.preventDefault(),o.length&&o.one("click",function(t){t.preventDefault()}).one($,function(){f||(o.trigger("click"),v&&o.attr("href").trim()&&(location.href=o.attr("href")))}),t.data=t.data||{},t.data.sortable=i,r.dragStart(t,this)}}}),e=s(l.Utils.debounce(function(t){return r.dragEnter(t,this)})),o=s(function(t){var e=r.dragenterData(this);r.dragenterData(this,e-1),r.dragenterData(this)||(l.$(this).removeClass(r.options.overClass),r.dragenterData(this,!1))}),n=s(function(t){return!h||h===this||a===this||(r.element.children().removeClass(r.options.overClass),a=this,r.moveElementNextTo(h,this),function(t){t.stopPropagation&&t.stopPropagation();t.preventDefault&&t.preventDefault();t.returnValue=!1}(t))});function s(a){return function(t){var e,o,n;if(m=t){if(o=(e=t.touches&&t.touches[0]||t).target||t.target,v&&document.elementFromPoint){var s=document.elementFromPoint(e.pageX-document.body.scrollLeft,e.pageY-document.body.scrollTop);s&&(o=s)}g=l.$(o)}l.$(o).hasClass("."+r.options.childClass)?a.apply(o,[t]):o!==i&&(n=function(t,e){var o=e;if(o==t)return null;for(;o;){if(o.parentNode===t)return o;if(!(o=o.parentNode)||!o.ownerDocument||11===o.nodeType)break}return null}(i,o))&&a.apply(n,[t])}}this.addDragHandlers=function(){v&&m.touches&&m.touches.length?i.addEventListener(C,n,!1):(i.addEventListener("mouseover",e,!1),i.addEventListener("mouseout",o,!1))},this.removeDragHandlers=function(){v&&m.touches&&m.touches.length?i.removeEventListener(C,n,!1):(i.removeEventListener("mouseover",e,!1),i.removeEventListener("mouseout",o,!1))},window.addEventListener(C,function(t){h&&r.dragMove(t,r)},!1),i.addEventListener(b,t,!1)},dragStart:function(t,e){u=f=!1;var o=this,n=l.$(t.target);if((v||2!=t.button)&&!n.is("."+o.options.noDragClass)){var s=n.closest("."+o.options.noDragClass);if(!(s.length&&this.element.find(s[0]).length||n.is(":input"))){h=e,d&&d.remove();var a=l.$(h),r=a.offset(),i=t.touches&&t.touches[0]||t;p={pos:{x:i.pageX,y:i.pageY},threshold:o.options.handleClass?1:o.options.threshold,apply:function(t){(d=l.$('<div class="'+[o.options.draggingClass,o.options.dragCustomClass].join(" ")+'"></div>').css({display:"none",top:r.top,left:r.left,width:a.width(),height:a.height(),padding:a.css("padding")}).data({"mouse-offset":{left:r.left-parseInt(i.pageX,10),top:r.top-parseInt(i.pageY,10)},origin:o.element,index:a.index()}).append(a.html()).appendTo("body")).$current=a,d.$sortable=o,a.data({"start-list":a.parent(),"start-index":a.index(),"sortable-group":o.options.group}),o.addDragHandlers(),o.options.start(this,h),o.trigger("start.uk.sortable",[o,h,d]),p=!(f=!0)}}}}},dragMove:function(t,e){var o,n=(g=l.$(document.elementFromPoint(t.pageX-(document.body.scrollLeft||document.scrollLeft||0),t.pageY-(document.body.scrollTop||document.documentElement.scrollTop||0)))).closest("."+this.options.baseClass),s=n.data("sortable-group"),a=l.$(h),r=a.parent(),i=a.data("sortable-group");n[0]!==r[0]&&void 0!==i&&s===i&&(n.data("sortable").addDragHandlers(),c.push(n),n.children().addClass(this.options.childClass),0<n.children().length?(o=g.closest("."+this.options.childClass)).length?o.before(a):n.append(a):g.append(a),l.$doc.trigger("mouseover")),this.checkEmptyList(),this.checkEmptyList(r)},dragEnter:function(t,e){if(!h||h===e)return!0;var o=this.dragenterData(e);if(this.dragenterData(e,o+1),0===o){var n=l.$(e).parent(),s=l.$(h).data("start-list");if(n[0]!==s[0]){var a=n.data("sortable-group"),r=l.$(h).data("sortable-group");if((a||r)&&a!=r)return!1}l.$(e).addClass(this.options.overClass),this.moveElementNextTo(h,e)}return!1},dragEnd:function(t,e){var o=this;h&&(this.options.stop(e),this.trigger("stop.uk.sortable",[this])),a=h=null,c.push(this.element),c.forEach(function(t,e){l.$(t).children().each(function(){1===this.nodeType&&(l.$(this).removeClass(o.options.overClass).removeClass(o.options.placeholderClass).removeClass(o.options.childClass),o.dragenterData(this,!1))})}),c=[],l.$html.removeClass(this.options.dragMovingClass),this.removeDragHandlers(),d&&(d.remove(),d=null)},dragDrop:function(t,e){"drop"===t.type&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()),this.triggerChangeEvents()},triggerChangeEvents:function(){if(h){var t=l.$(h),e=d.data("origin"),o=t.closest("."+this.options.baseClass),n=[],s=l.$(h);e[0]===o[0]&&d.data("index")!=t.index()?n.push({sortable:this,mode:"moved"}):e[0]!=o[0]&&n.push({sortable:l.$(o).data("sortable"),mode:"added"},{sortable:l.$(e).data("sortable"),mode:"removed"}),n.forEach(function(t,e){t.sortable&&t.sortable.element.trigger("change.uk.sortable",[t.sortable,s,t.mode])})}},dragenterData:function(t,e){if(t=l.$(t),1==arguments.length)return parseInt(t.data("child-dragenter"),10)||0;e?t.data("child-dragenter",Math.max(0,e)):t.removeData("child-dragenter")},moveElementNextTo:function(t,e){!0;var o=this,n=l.$(t).parent().css("min-height",""),s=function(t,e){var o=t.parentNode;if(e.parentNode!=o)return!1;var n=t.previousSibling;for(;n&&9!==n.nodeType;){if(n===e)return!0;n=n.previousSibling}return!1}(t,e)?e:e.nextSibling,a=n.children(),r=a.length;if(!o.options.animation)return e.parentNode.insertBefore(t,s),void l.Utils.checkDisplay(o.element.parent());n.css("min-height",n.height()),a.stop().each(function(){var t=l.$(this),e=t.position();e.width=t.width(),t.data("offset-before",e)}),e.parentNode.insertBefore(t,s),l.Utils.checkDisplay(o.element.parent()),(a=n.children().each(function(){var t=l.$(this);t.data("offset-after",t.position())}).each(function(){var t=l.$(this),e=t.data("offset-before");t.css({position:"absolute",top:e.top,left:e.left,minWidth:e.width})})).each(function(){var t=l.$(this),e=(t.data("offset-before"),t.data("offset-after"));t.css("pointer-events","none").width(),setTimeout(function(){t.animate({top:e.top,left:e.left},o.options.animation,function(){t.css({position:"",top:"",left:"",minWidth:"","pointer-events":""}).removeClass(o.options.overClass).removeData("child-dragenter"),--r||(n.css("min-height",""),l.Utils.checkDisplay(o.element.parent()))})},0)})},serialize:function(){var a,r,i=[];return this.element.children().each(function(t,e){a={};for(var o,n,s=0;s<e.attributes.length;s++)0===(r=e.attributes[s]).name.indexOf("data-")&&(o=r.name.substr(5),n=l.Utils.str2json(r.value),a[o]=n||"false"==r.value||"0"==r.value?n:r.value);i.push(a)}),i},checkEmptyList:function(t){t=t?l.$(t):this.element,this.options.emptyClass&&t[t.children().length?"removeClass":"addClass"](this.options.emptyClass)}}),l.sortable});